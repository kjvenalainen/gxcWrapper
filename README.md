# (G)enerate (X)code (C)ompilation Database Wrapper

Wrapper script for an `xcodebuild` command that generates and updates `compile-commands.json`.

Based on `T1T4N`'s excellent writeup [here](https://gist.github.com/T1T4N/f4d63a44476eb5c7046cc561cb8c7f77). The script invokes the build with `-gen-cdb-fragment-path` to generate `clangd`-compatible compilation database fragments and appends them to `compile_commands.json`.

The python script is needed to:

1. Normalize the output fragments generated by `-gen-cdb-fragment-path`, removing trailing commas and newlines.
2. Smartly update the entries in `compile-commands.json`, as not every build will produce compilation fragments for each input file.

# Prerequisites

`python3` must be invokable from your path.

# Usage

Invoke the `gxcWrapper.sh` script in front of your normal `xcodebuild` command.

``` bash
./gxcWrapper.sh xcodebuild -workspace MyWorkspace.xcworkspace -scheme MyScheme build
```
